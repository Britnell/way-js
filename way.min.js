var wayjs=function(e,t){"use strict";const n={},o={},r={},i=new Set,s={"x-text":(t,n,o)=>{e.effect(()=>{t.textContent=h(n,o)})},"x-show":(t,n,o)=>{e.effect(()=>{const e=h(n,o);t.style.display=e?"":"none";const r=t.nextElementSibling;r?.hasAttribute("x-else")&&(r.style.display=e?"none":"")})},"x-model":(t,n,o)=>{const r=t,i=function(e,t){const n=t.split(".");let o=e;for(const e of n)o=o[e];return o}(o,n);u(i)?(setTimeout(()=>{b(r,i.value)},0),e.effect(()=>{b(r,i.value)}),r.addEventListener("input",()=>{i.value=function(e){return e instanceof HTMLInputElement?"checkbox"===e.type?e.checked:"radio"===e.type?e.checked?e.value:null:"number"===e.type?""===e.value?null:Number(e.value):e.value:e.value}(r)})):console.error(`[x-model] Expression "${n}" does not resolve to a signal. x-model requires a signal.`)},"x-form":function(e,t,n){if(!(e instanceof HTMLFormElement))return void console.error("x-form directive can only be used on form elements.");const r=e,i=t,s=o[i];if(!s)return void console.error(`Form validation schema not found: "${i}"`);r.addEventListener("input",e=>{m(e.target,s)}),r.addEventListener("submit",e=>{const t=function(e,t){const n=new FormData(e);let o=!0;return n.forEach((e,t)=>{e.toString()}),e.querySelectorAll("input, textarea, select").forEach(e=>{const n=e;m(n,t),n.checkValidity()||(o=!1)}),o}(r,s);if(!t)return void e.preventDefault();if(!r.getAttribute("@onsubmit"))return;e.preventDefault();const n=new FormData(r),o={};n.forEach((e,t)=>{o[t]=e.toString()});const i=new CustomEvent("onsubmit",{detail:o,bubbles:!0});r.dispatchEvent(i)})},"x-if":function(t,n,o){if(!(t instanceof HTMLTemplateElement))return void console.error("x-if directive must be used on a <template> element.");const r=document.createElement("div");r.style.display="contents",t.parentNode.insertBefore(r,t);const i=[];i.push({template:t,expression:n});let s=t.nextElementSibling;for(;s;){if(!(s instanceof HTMLTemplateElement&&s.hasAttribute("x-else-if"))){if(s instanceof HTMLTemplateElement&&s.hasAttribute("x-else")){i.push({template:s,expression:null});break}break}i.push({template:s,expression:s.getAttribute("x-else-if")}),s=s.nextElementSibling}let a=null;e.effect(()=>{let e=null;for(const{template:t,expression:n}of i)if(null===n||h(n,o)){e=t;break}if(e!==a){if(r.innerHTML="",e){const t=e.content.cloneNode(!0),n=Array.from(t.children);for(const e of n)e instanceof Element&&c(e,o);r.append(t)}a=e}})},"x-for":function(t,n,o){if(!(t instanceof HTMLTemplateElement))return void console.error("x-for directive must be used on a <template> element.");const r=document.createElement("div");r.style.display="contents",t.parentNode.insertBefore(r,t);const[i,s,l]=function(e){const t=e.match(/^\((\w+),\s*(\w+)\)\s+in\s+(.+)$/);if(t)return[t[1],t[2],t[3].trim()];const n=e.match(/^(\w+)\s+in\s+(.+)$/);if(!n)throw new Error(`Invalid x-for expression: "${e}"`);return[n[1],null,n[2].trim()]}(n);e.effect(()=>{const e=h(l,o),n=u(e)?e.value:e;if(r.innerHTML="",Array.isArray(n))for(let e=0;e<n.length;e++){const l=n[e],u=v(o,i,s,l,e),f=t.content.cloneNode(!0);for(const e of Array.from(f.childNodes))e instanceof Element?c(e,u):e instanceof Text&&a(e,u);r.appendChild(f)}})},"x-load":(e,t,n)=>{e.style.display="block"},"x-temp":(e,t,n)=>{const o=t,r=document.getElementById(o);if(!r)return void console.error(`Template with id "${o}" not found.`);const i=document.createDocumentFragment();for(;e.firstChild;)i.appendChild(e.firstChild);const s=r.content.cloneNode(!0),c=s.querySelector("slot");c&&c.replaceWith(i),e.appendChild(s)}};function c(e=document.body,t={}){!function(e,t={},n){function o(e,t){if(e instanceof Element){const r=["SCRIPT","STYLE"].includes(e.tagName),i="TEMPLATE"===e.tagName&&e.id;if(r||i)return;const s=n(e,t),c=Array.from(e.childNodes);for(const e of c)o(e,s)}else e instanceof Text&&n(e,t)}o(e,t)}(e,{...r,...window.pageprops,...t},(e,t)=>{let r={...t};if(e instanceof Element){r=function(e,t){const r=e.getAttribute("x-comp"),i=e.getAttribute("x-form");let s={};if(r)if(r.includes("{"))try{s=f(h(r,{}))}catch(e){return console.error(`Failed to evaluate x-comp "${r}" as inline object`,e),t}else{const o=r.split(",").map(e=>e.trim());for(const i of o)if(n[i]){const o=g(e),r=d(e,t),c=n[i]({props:r,emit:o,el:e});s={...s,...c}}else console.warn(`Component "${i}" not found in x-comp "${r}"`)}if(i){const t=o[i];if(t?.setup){const n=g(e),o=t.setup({el:e,emit:n});o&&(s={...s,...o})}}return e._data=s,{...t,...e._data}}(e,r);const t=function(e,t){if(!e.tagName.includes("-"))return t;const o=e.tagName.toLowerCase();if(!n[o])return t;const r=d(e,t),i=g(e);return e._data=n[o]({props:r,el:e,emit:i}),{...t,...e._data}}(e,r);t!==r&&(r=t)}return a(e,r),r})}function a(t,n){if(t instanceof Text)return void function(t,n){const o=t.textContent;if(!o?.trim()||!o.includes("{"))return;const r=o.split(/(\{[^{}]*\})/g);e.effect(()=>{t.textContent=r.map(e=>{if(e.startsWith("{")&&e.endsWith("}")){const t=e.slice(1,-1);try{const o=h(t,n);return null==o?e:String(o)}catch(n){return console.error(`Template interpolation error for "${t}":`,n),e}}return e}).join("")})}(t,n);Object.keys(s).forEach(e=>{if(t.hasAttribute(e)){const o=t.getAttribute(e);(o||"x-load"===e)&&s[e](t,o||"",n)}});Array.from(t.attributes).filter(e=>e.name.startsWith("@")||e.name.startsWith(":")).forEach(o=>{const r=o.value;if(r)if(o.name.startsWith("@")){const e=o.name.substring(1);!function(e,t,n,o){const{event:r,modifiers:i}=function(e){const t=e.split(".");return{event:t[0],modifiers:t.slice(1)}}(t),s=e=>e?._data?g(e):e.parentElement?s(e.parentElement):null,c=s(e),a=t=>{for(const n of i){const o=l[n];if(o){if(!0===o(e,t))return}}const r={...o,$event:t,emit:c};h(n,r)},u=i.includes("once")?{once:!0}:{};e.addEventListener(r,a,u)}(t,e,r,n)}else if(o.name.startsWith(":")){const i=o.name.substring(1);!function(t,n,o,r){e.effect(()=>{const e=h(o,r);if("class"===n){if(!e)return;if("string"==typeof e)t.className=e;else if(Array.isArray(e))t.className=e.join(" ");else if("object"==typeof e){const n=Object.entries(e).filter(([e,t])=>t).map(([e])=>e).join(" ");t.className=n}}else"style"===n?"string"==typeof e?t.style.cssText=e:"object"==typeof e&&Object.entries(e).forEach(([e,n])=>{t.style.setProperty(e,String(n))}):!1===e||null==e?t.removeAttribute(n):t.setAttribute(n,String(e))})}(t,i,r,n)}})}const l={prevent:(e,t)=>{t.preventDefault()},stop:(e,t)=>{t.stopPropagation()},outside:(e,t)=>!t.target||(!!e.contains(t.target)||void 0),self:(e,t)=>{if(t.target!==e)return!0}};function u(e){return!(!e||"object"!=typeof e||"function"!=typeof e.peek)}function f(t){if("object"!=typeof t||null===t||u(t))return t;const n={};return Object.keys(t).forEach(o=>{const r=t[o];u(r)?n[o]=r:"function"==typeof r?n[o]=r.bind(n):"object"!=typeof r||null===r||Array.isArray(r)?n[o]=e.signal(r):n[o]=f(r)}),n}function d(e,t){const n=e.getAttribute("x-props");if(!n)return{};try{return h(n,t)}catch(e){return console.error("Error parsing props:",e),{}}}function m(e,n){const o=e.name;if(!o)return;const{fields:r}=n;if(!r||!r[o]){e.setCustomValidity("");const t=e.getAttribute("aria-describedby");if(t){const e=document.getElementById(t);e&&(e.textContent="")}return}const i=t.safeParse(r[o],e.value),s=e.getAttribute("aria-describedby");let c=null;if(s&&(c=document.getElementById(s)),i.success)e.setCustomValidity("");else{const t=i.issues?.[0]?.message||"Invalid value";e.setCustomValidity(t)}c&&(c.textContent=e.validationMessage)}const p={comp:function(e,t){n[e]=t||(({props:e})=>e);const o=document.getElementById(e);e.includes("-")&&(o?(!function(e,t){class n extends y{constructor(){super(t)}}customElements.define(e,n)}(e,o),i.add(e)):console.error(`Web component "${e}" has a hyphen in its name but no matching template found. The component will not be registered.`))},render:async function(e,t){document.dispatchEvent(new CustomEvent("way:init")),await async function(e){const t=Array.from(e).filter(e=>e.includes("-"));if(t.length>0){const e=t.map(e=>customElements.whenDefined(e).catch(()=>null));await Promise.all(e)}}(i),c(e,t)},form:function(e,t,n){o[e]={fields:t,setup:n}},signal:e.signal,effect:e.effect,computed:e.computed,store:function(e,t){r[e]=t()}};function h(e,t){try{return new Function("data",`with(data) { return (${e}) }`)(t)}catch(e){return null}}function b(e,t){if(e instanceof HTMLInputElement){if("checkbox"===e.type)return void(e.checked=Boolean(t));if("radio"===e.type)return void(e.checked=e.value===String(t))}e.value=String(t??"")}"undefined"!=typeof window&&(window.way=p);class y extends HTMLElement{constructor(e){super(),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e}connectedCallback(){const e=document.createDocumentFragment();for(;this.firstChild;)e.appendChild(this.firstChild);const t=this.template.content.cloneNode(!0),n=t.querySelector("slot");n&&n.replaceWith(e),this.appendChild(t),this._data?.onMounted&&this._data.onMounted()}disconnectedCallback(){this._data?.onUnmounted&&this._data.onUnmounted()}}function v(e,t,n,o,r){const i={...e,[t]:o,$index:r};return n&&(i[n]=r,i.index=r),i}function g(e){return(t,n)=>{e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0}))}}return p}(signalsCore,valibot);
