var wayjs=function(e,t){"use strict";let n=!0;const o=new e.Signal.subtle.Watcher(()=>{n&&(n=!1,queueMicrotask(r))});function r(){n=!0;for(const e of o.getPending())e.get();o.watch()}function i(t){let n;const r=new e.Signal.Computed(()=>{"function"==typeof n&&n();const e=t();n=void 0===e?void 0:e});return o.watch(r),r.get(),()=>{o.unwatch(r),"function"==typeof n&&n(),n=void 0}}function s(t){const n=new e.Signal.State(t);return{get value(){return n.get()},set value(e){n.set(e)},peek:()=>n.get()}}const c={},a={},l={},u=new Set,f={"x-text":(e,t,n)=>{i(()=>{e.textContent=x(t,n)})},"x-show":(e,t,n)=>{i(()=>{const o=x(t,n);e.style.display=o?"":"none";const r=e.nextElementSibling;r?.hasAttribute("x-else")&&(r.style.display=o?"none":"")})},"x-model":(e,t,n)=>{const o=e,r=function(e,t){const n=t.split(".");let o=e;for(const e of n)o=o[e];return o}(n,t);h(r)?(setTimeout(()=>{E(o,r.value)},0),i(()=>{E(o,r.value)}),o.addEventListener("input",()=>{r.value=function(e){return e instanceof HTMLInputElement?"checkbox"===e.type?e.checked:"radio"===e.type?e.checked?e.value:null:"number"===e.type?""===e.value?null:Number(e.value):e.value:e.value}(o)})):console.error(`[x-model] Expression "${t}" does not resolve to a signal. x-model requires a signal.`)},"x-form":function(e,t,n){if(!(e instanceof HTMLFormElement))return void console.error("x-form directive can only be used on form elements.");const o=e,r=t,i=a[r];if(!i)return void console.error(`Form validation schema not found: "${r}"`);o.addEventListener("input",e=>{g(e.target,i)}),o.addEventListener("submit",e=>{const t=function(e,t){const n=new FormData(e);let o=!0;return n.forEach((e,t)=>{e.toString()}),e.querySelectorAll("input, textarea, select").forEach(e=>{const n=e;g(n,t),n.checkValidity()||(o=!1)}),o}(o,i);if(!t)return void e.preventDefault();if(!o.getAttribute("@onsubmit"))return;e.preventDefault();const n=new FormData(o),r={};n.forEach((e,t)=>{r[t]=e.toString()});const s=new CustomEvent("onsubmit",{detail:r,bubbles:!0});o.dispatchEvent(s)})},"x-if":function(e,t,n){if(!(e instanceof HTMLTemplateElement))return void console.error("x-if directive must be used on a <template> element.");const o=document.createElement("div");o.style.display="contents",e.parentNode.insertBefore(o,e);const r=[];r.push({template:e,expression:t});let s=e.nextElementSibling;for(;s;){if(!(s instanceof HTMLTemplateElement&&s.hasAttribute("x-else-if"))){if(s instanceof HTMLTemplateElement&&s.hasAttribute("x-else")){r.push({template:s,expression:null});break}break}r.push({template:s,expression:s.getAttribute("x-else-if")}),s=s.nextElementSibling}let c=null;i(()=>{let e=null;for(const{template:t,expression:o}of r)if(null===o||x(o,n)){e=t;break}if(e!==c){if(o.innerHTML="",e){const t=e.content.cloneNode(!0),r=Array.from(t.children);for(const e of r)e instanceof Element&&d(e,n);o.append(t)}c=e}})},"x-for":function(e,t,n){if(!(e instanceof HTMLTemplateElement))return void console.error("x-for directive must be used on a <template> element.");const o=document.createElement("div");o.style.display="contents",e.parentNode.insertBefore(o,e);const[r,s,c]=function(e){const t=e.match(/^\((\w+),\s*(\w+)\)\s+in\s+(.+)$/);if(t)return[t[1],t[2],t[3].trim()];const n=e.match(/^(\w+)\s+in\s+(.+)$/);if(!n)throw new Error(`Invalid x-for expression: "${e}"`);return[n[1],null,n[2].trim()]}(t);i(()=>{const t=x(c,n),i=h(t)?t.value:t;if(o.innerHTML="",Array.isArray(i))for(let t=0;t<i.length;t++){const c=i[t],a=A(n,r,s,c,t),l=e.content.cloneNode(!0);for(const e of Array.from(l.childNodes))e instanceof Element?d(e,a):e instanceof Text&&m(e,a);o.appendChild(l)}})},"x-load":(e,t,n)=>{e.style.display="block"},"x-temp":(e,t,n)=>{const o=t,r=document.getElementById(o);if(!r)return void console.error(`Template with id "${o}" not found.`);const i=document.createDocumentFragment();for(;e.firstChild;)i.appendChild(e.firstChild);const s=r.content.cloneNode(!0),c=s.querySelector("slot");c&&c.replaceWith(i),e.appendChild(s)}};function d(e=document.body,t={}){!function(e,t={},n){function o(e,t){if(e instanceof Element){const r=["SCRIPT","STYLE"].includes(e.tagName),i="TEMPLATE"===e.tagName&&e.id;if(r||i)return;const s=n(e,t),c=Array.from(e.childNodes);for(const e of c)o(e,s)}else e instanceof Text&&n(e,t)}o(e,t)}(e,{...l,...window.pageprops,...t},(e,t)=>{let n={...t};if(e instanceof Element){n=function(e,t){const n=e.getAttribute("x-comp"),o=e.getAttribute("x-form");let r={};if(n)if(n.includes("{"))try{r=y(x(n,{}))}catch(e){return console.error(`Failed to evaluate x-comp "${n}" as inline object`,e),t}else{const o=n.split(",").map(e=>e.trim());for(const i of o)if(c[i]){const n=C(e),o=b(e,t),s=c[i]({props:o,emit:n,el:e});r={...r,...s}}else console.warn(`Component "${i}" not found in x-comp "${n}"`)}if(o){const t=a[o];if(t?.setup){const n=C(e),o=t.setup({el:e,emit:n});o&&(r={...r,...o})}}return e._data=r,{...t,...e._data}}(e,n);const t=function(e,t){if(!e.tagName.includes("-"))return t;const n=e.tagName.toLowerCase();if(!c[n])return t;const o=b(e,t),r=C(e);return e._data=c[n]({props:o,el:e,emit:r}),{...t,...e._data}}(e,n);t!==n&&(n=t)}return m(e,n),n})}function m(e,t){if(e instanceof Text)return void function(e,t){const n=e.textContent;if(!n?.trim()||!n.includes("{"))return;const o=n.split(/(\{[^{}]*\})/g);i(()=>{e.textContent=o.map(e=>{if(e.startsWith("{")&&e.endsWith("}")){const n=e.slice(1,-1);try{const o=x(n,t);return null==o?e:String(o)}catch(t){return console.error(`Template interpolation error for "${n}":`,t),e}}return e}).join("")})}(e,t);Object.keys(f).forEach(n=>{if(e.hasAttribute(n)){const o=e.getAttribute(n);(o||"x-load"===n)&&f[n](e,o||"",t)}});Array.from(e.attributes).filter(e=>e.name.startsWith("@")||e.name.startsWith(":")).forEach(n=>{const o=n.value;if(o)if(n.name.startsWith("@")){const r=n.name.substring(1);!function(e,t,n,o){const{event:r,modifiers:i}=function(e){const t=e.split(".");return{event:t[0],modifiers:t.slice(1)}}(t),s=e=>e?._data?C(e):e.parentElement?s(e.parentElement):null,c=s(e),a=t=>{for(const n of i){const o=p[n];if(o){if(!0===o(e,t))return}}const r={...o,$event:t,emit:c};x(n,r)},l=i.includes("once")?{once:!0}:{};e.addEventListener(r,a,l)}(e,r,o,t)}else if(n.name.startsWith(":")){const r=n.name.substring(1);!function(e,t,n,o){i(()=>{const r=x(n,o);if("class"===t){if(!r)return;if("string"==typeof r)e.className=r;else if(Array.isArray(r))e.className=r.join(" ");else if("object"==typeof r){const t=Object.entries(r).filter(([e,t])=>t).map(([e])=>e).join(" ");e.className=t}}else"style"===t?"string"==typeof r?e.style.cssText=r:"object"==typeof r&&Object.entries(r).forEach(([t,n])=>{e.style.setProperty(t,String(n))}):!1===r||null==r?e.removeAttribute(t):e.setAttribute(t,String(r))})}(e,r,o,t)}})}const p={prevent:(e,t)=>{t.preventDefault()},stop:(e,t)=>{t.stopPropagation()},outside:(e,t)=>!t.target||(!!e.contains(t.target)||void 0),self:(e,t)=>{if(t.target!==e)return!0}};function h(e){return!(!e||"object"!=typeof e||"function"!=typeof e.peek||!("value"in e))}function y(e){if("object"!=typeof e||null===e||h(e))return e;const t={};return Object.keys(e).forEach(n=>{const o=e[n];h(o)?t[n]=o:"function"==typeof o?t[n]=o.bind(t):"object"!=typeof o||null===o||Array.isArray(o)?t[n]=s(o):t[n]=y(o)}),t}function b(e,t){const n=e.getAttribute("x-props");if(!n)return{};try{return x(n,t)}catch(e){return console.error("Error parsing props:",e),{}}}function g(e,n){const o=e.name;if(!o)return;const{fields:r}=n;if(!r||!r[o]){e.setCustomValidity("");const t=e.getAttribute("aria-describedby");if(t){const e=document.getElementById(t);e&&(e.textContent="")}return}const i=t.safeParse(r[o],e.value),s=e.getAttribute("aria-describedby");let c=null;if(s&&(c=document.getElementById(s)),i.success)e.setCustomValidity("");else{const t=i.issues?.[0]?.message||"Invalid value";e.setCustomValidity(t)}c&&(c.textContent=e.validationMessage)}const v={comp:function(e,t){c[e]=t||(({props:e})=>e);const n=document.getElementById(e);e.includes("-")&&(n?(!function(e,t){class n extends w{constructor(){super(t)}}customElements.define(e,n)}(e,n),u.add(e)):console.error(`Web component "${e}" has a hyphen in its name but no matching template found. The component will not be registered.`))},render:async function(e,t){document.dispatchEvent(new CustomEvent("way:init")),await async function(e){const t=Array.from(e).filter(e=>e.includes("-"));if(t.length>0){const e=t.map(e=>customElements.whenDefined(e).catch(()=>null));await Promise.all(e)}}(u),d(e,t)},form:function(e,t,n){a[e]={fields:t,setup:n}},signal:s,effect:i,computed:function(t){const n=new e.Signal.Computed(t);return{get value(){return n.get()},peek:()=>n.get()}},store:function(e,t){l[e]=t()}};function x(e,t){try{return new Function("data",`with(data) { return (${e}) }`)(t)}catch(e){return null}}function E(e,t){if(e instanceof HTMLInputElement){if("checkbox"===e.type)return void(e.checked=Boolean(t));if("radio"===e.type)return void(e.checked=e.value===String(t))}e.value=String(t??"")}"undefined"!=typeof window&&(window.way=v);class w extends HTMLElement{constructor(e){super(),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e}connectedCallback(){const e=document.createDocumentFragment();for(;this.firstChild;)e.appendChild(this.firstChild);const t=this.template.content.cloneNode(!0),n=t.querySelector("slot");n&&n.replaceWith(e),this.appendChild(t),this._data?.onMounted&&this._data.onMounted()}disconnectedCallback(){this._data?.onUnmounted&&this._data.onUnmounted()}}function A(e,t,n,o,r){const i={...e,[t]:o,$index:r};return n&&(i[n]=r,i.index=r),i}function C(e){return(t,n)=>{e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0}))}}return v}(signalPolyfill,valibot);
